import{M as $}from"./modal-64f7c773.js";import{_ as f,o as i,c as l,d as m,t as o,a as t,g as k,h as C,F as p,e as v,r as g,b,i as x}from"./index-df8bb73d.js";const L={props:["tempProduct"],data(){return{url:"https://vue3-course-api.hexschool.io/v2",path:"test8283",modal:{},num:1}},methods:{addCart(d,s){this.$emit("emitAddToCart",d,s)}},mounted(){this.modal=new $(this.$refs.modal)}},T={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},M={class:"modal-dialog modal-xl",role:"document"},V={class:"modal-content border-0"},w={class:"modal-header bg-dark text-white"},E={class:"modal-title",id:"exampleModalLabel"},R=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),A={class:"modal-body"},U={class:"row"},D={class:"col-sm-6"},I=["src"],B={class:"col-sm-6"},S={class:"badge bg-primary rounded-pill"},N={key:0,class:"h5"},z={key:1},F={class:"h6"},H={class:"h5"},O={class:"input-group"},j=["value"];function q(d,s,e,r,n,u){return i(),l("div",T,[m(o(n.num)+" ",1),t("div",M,[t("div",V,[t("div",w,[t("h5",E,[t("span",null,o(e.tempProduct.title),1)]),R]),t("div",A,[t("div",U,[t("div",D,[t("img",{class:"img-fluid",src:e.tempProduct.imageUrl,alt:""},null,8,I)]),t("div",B,[t("span",S,o(e.tempProduct.category),1),t("p",null,"商品描述："+o(e.tempProduct.description),1),t("p",null,"商品內容："+o(e.tempProduct.content),1),e.tempProduct.origin_price===e.tempProduct.price?(i(),l("div",N,o(e.tempProduct.price)+" 元",1)):(i(),l("div",z,[t("del",F,"原價 "+o(e.tempProduct.origin_price)+" 元",1),t("div",H,"現在只要 "+o(e.tempProduct.price)+" 元",1)])),t("div",null,[t("div",O,[k(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=c=>n.num=c)},[(i(),l(p,null,v(20,c=>t("option",{value:c,key:c+"12345"},o(c),9,j)),64))],512),[[C,n.num]]),t("button",{type:"button",class:"btn btn-primary",onClick:s[1]||(s[1]=c=>u.addCart(e.tempProduct.id,n.num))},"加入購物車")])])])])])])])],512)}const G=f(L,[["render",q]]),{VITE_URL:_,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"test8283",BASE_URL:"/vue-training//week6/dist/",MODE:"production",DEV:!1,PROD:!0},J={data(){return{products:[],product:{},tempProduct:{},isLoading:!1}},methods:{getProducts(){this.isLoading=!0,this.$http.get(`${_}/api/${h}/products/all`).then(d=>{const{products:s}=d.data;this.products=s,this.isLoading=!1}).catch(d=>alert(d.data.message))},getProduct(d){this.$http.get(`${_}/api/${h}/product/${d}`).then(s=>{const{product:e}=s.data;this.tempProduct=e,this.$refs.productModalRef.modal.show()}).catch(s=>{alert(s.data.message)})},addToCart(d,s=1){this.isLoading=!0;const e={product_id:d,qty:s};this.$http.post(`${_}/api/${h}/cart`,{data:e}).then(r=>{this.isLoading=!1,this.$refs.productModalRef.modal.hide(),this.$swal(r.data.message)}).catch(r=>{this.$swal(r.data.message)})}},components:{ProductModal:G},mounted(){this.getProducts()}},K={class:"mt-4"},Q={class:"table align-middle"},W=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),X={style:{width:"200px"}},Y={key:0,class:"h5"},Z={key:1},tt={class:"h6"},et={class:"h5"},st={class:"btn-group btn-group-sm"},ot=["onClick"],dt=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),at=["onClick"],it=t("i",{class:"fas fa-spinner fa-pulse"},null,-1);function lt(d,s,e,r,n,u){const c=g("VLoading"),P=g("ProductModal");return i(),l(p,null,[b(c,{active:n.isLoading,"can-cancel":!1,color:"#007bff","is-full-page":!0},null,8,["active"]),t("div",K,[b(P,{ref:"productModalRef","temp-product":n.tempProduct,onEmitAddToCart:u.addToCart},null,8,["temp-product","onEmitAddToCart"]),t("table",Q,[W,t("tbody",null,[(i(!0),l(p,null,v(n.products,a=>(i(),l("tr",{key:a.id},[t("td",X,[t("div",{style:x([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${a.imageUrl})`}])},null,4)]),t("td",null,o(a.title),1),t("td",null,[a.price===a.origin_price?(i(),l("div",Y,o(a.price)+" 元 ",1)):(i(),l("div",Z,[t("del",tt,"原價 "+o(a.origin_price)+" 元",1),t("div",et,"現在只要 "+o(a.price)+" 元",1)]))]),t("td",null,[t("div",st,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:y=>u.getProduct(a.id)},[dt,m(" 查看更多 ")],8,ot),t("button",{type:"button",class:"btn btn-outline-danger",onClick:y=>u.addToCart(a.id)},[it,m(" 加到購物車 ")],8,at)])])]))),128))])])])],64)}const rt=f(J,[["render",lt]]);export{rt as default};
